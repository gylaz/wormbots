<html>
  <head></head>
  <body>
    <h1>W3rms html</h1>
    <div id="world"></div>
    <script>
      console.log('loaded!');
      var source = new EventSource('/events');

      // new connection opened callback
      source.addEventListener('open', function(e) {
        console.log('connection opened');
      }, false);

      // subscribe to unnamed messages
      source.onmessage = function(e) {
        console.log(e);
        var world = document.getElementById('world');
        world.innerHTML = e.data;
      };

      // listen for signup events
      source.addEventListener('tick', function(e) {
        console.log(e);
        document.body.innerHTML += e.data + '<br />';
      }, false);

      // connection closed callback
      source.addEventListener('error', function(e) {
        if (e.eventPhase == EventSource.CLOSED) {
          console.log('connection closed');
          source.close();
        }
      }, false);
    </script>
  </body>
</html>